/* --- Космический фон (только CSS) --- */
.fx-cosmic {
  /* палитра (можно подтянуть из темы) */
  --fx-c1: #0f1020;
  --fx-c2: #171833;
  --fx-c3: #0d0f25;

  position: relative;
  min-height: 100vh;
  background:
    radial-gradient(1200px 700px at 50% -250px, rgba(255,255,255,0.08), transparent 60%),
    radial-gradient(900px 600px at 12% 120%, rgba(110,150,255,0.10), transparent 60%),
    radial-gradient(900px 600px at 88% 130%, rgba(255,120,185,0.08), transparent 60%),
    linear-gradient(180deg, var(--fx-c1), var(--fx-c2) 45%, var(--fx-c3));
  /* без background-attachment: fixed — избегаем reflow на iOS */
}

/* два «неподвижных» (fixed) слоя со звёздами; анимируем ТОЛЬКО transform */
.fx-cosmic::before,
.fx-cosmic::after {
  content: "";
  position: fixed;
  inset: -20% -20% -20% -20%;
  pointer-events: none;
  will-change: transform;
  opacity: .45;
  animation: fx-stars 120s linear infinite;
  z-index: 0; /* фон под контентом */
}
.fx-cosmic::before {
  background-repeat: repeat;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.55) 60%, transparent 61%),
    radial-gradient(1.5px 1.5px at 70% 80%, rgba(255,255,255,.40) 60%, transparent 61%),
    radial-gradient(1.2px 1.2px at 40% 60%, rgba(255,255,255,.50) 60%, transparent 61%);
  background-size: 420px 420px, 460px 460px, 520px 520px;
}
.fx-cosmic::after {
  opacity: .25;
  animation-duration: 160s;
  background-repeat: repeat;
  background-image:
    radial-gradient(1.5px 1.5px at 12% 22%, rgba(255,255,255,.45) 60%, transparent 61%),
    radial-gradient(1px 1px at 62% 42%, rgba(255,255,255,.35) 60%, transparent 61%),
    radial-gradient(1.2px 1.2px at 82% 72%, rgba(255,255,255,.30) 60%, transparent 61%);
  background-size: 380px 380px, 460px 460px, 540px 540px;
}
@keyframes fx-stars {
  from { transform: translate3d(0, 0, 0); }
  to   { transform: translate3d(-600px, -400px, 0); }
}

/* уважение к экономии движения */
@media (prefers-reduced-motion: reduce) {
  .fx-cosmic::before,
  .fx-cosmic::after { animation: none; opacity: .18; }
}

/* --- Стеклянные карточки (glassmorphism) --- */
/* Базовый, сверхлёгкий режим без blur — работает везде */
.fx-glass {
  position: relative;
  z-index: 1;
  border-radius: 22px;
  background: color-mix(in oklab, #ffffff 72%, transparent);
  border: 1px solid rgba(255,255,255,.35);
  box-shadow: 0 6px 20px rgba(18, 22, 40, 0.06);
  /* Прозрачность содержимого — убери внутренние белые подложки */
}

/* Если поддерживается blur — включаем деликатно */
@supports ((backdrop-filter: blur(6px)) or (-webkit-backdrop-filter: blur(6px))) {
  .fx-glass {
    backdrop-filter: blur(6px) saturate(112%);
    -webkit-backdrop-filter: blur(6px) saturate(112%);
    background: color-mix(in oklab, #ffffff 60%, transparent);
    border: 1px solid rgba(255,255,255,.28);
    box-shadow: 0 8px 26px rgba(18, 22, 40, 0.08);
  }
}

/* Совсем ультралёгкий вариант без тени для чистого «стекла» */
.fx-glass.fx-lite {
  box-shadow: none;
  border: 1px solid rgba(255,255,255,.25);
  background: color-mix(in oklab, #ffffff 58%, transparent);
}

/* Контент карточки не должен иметь собственного непрозрачного фона */
.fx-glass .fx-card-media,
.fx-glass .fx-card-body {
  background: transparent;
}

/* Безопасные зоны для Telegram Mini App / iOS */
.fx-safe {
  padding-bottom: env(safe-area-inset-bottom, 0);
  padding-top:    env(safe-area-inset-top, 0);
}
