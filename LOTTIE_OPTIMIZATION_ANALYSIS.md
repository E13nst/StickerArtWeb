# –ê–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã Lottie-–∞–Ω–∏–º–∞—Ü–∏–π

## –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: `lottie-react` (v2.4.0) + `lottie-web` (v5.13.0)
- **–†–µ–Ω–¥–µ—Ä–µ—Ä**: SVG (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –±–µ–∑ —è–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- **–ö–µ—à**: In-memory Map –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ TTL
- **–ó–∞–≥—Ä—É–∑–∫–∞**: Fetch –±–µ–∑ prefetch/lazy load
- **–ö–æ–Ω—Ç—Ä–æ–ª—å**: –ù–µ—Ç –ø–∞—É–∑—ã –Ω–µ–≤–∏–¥–∏–º—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π

### –¢–æ—á–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
1. **PackCard** - –¥–æ 4 preview —Å—Ç–∏–∫–µ—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–≤—Å–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è, –≤–∏–¥–∏–º –æ–¥–∏–Ω)
2. **StickerSetDetail** - 1 –±–æ–ª—å—à–∞—è –∞–Ω–∏–º–∞—Ü–∏—è + –¥–æ 50+ –º–∏–Ω–∏–∞—Ç—é—Ä (–Ω–æ –º–∏–Ω–∏–∞—Ç—é—Ä—ã –±–µ–∑ Lottie)
3. **–ì–∞–ª–µ—Ä–µ—è** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ PackCard –º–æ–≥—É—Ç –±—ã—Ç—å –≤–∏–¥–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## –£–∑–∫–∏–µ –º–µ—Å—Ç–∞ (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≤–ª–∏—è–Ω–∏—é –Ω–∞ FPS, TTFI, –ø–∞–º—è—Ç—å)

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–≤—ã—Å–æ–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ)

#### 1. **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤—Å–µ—Ö preview —Å—Ç–∏–∫–µ—Ä–æ–≤ –≤ PackCard**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê‚≠ê‚≠ê | TTFI ‚≠ê‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê‚≠ê‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –í `PackCard.tsx` –≤—Å–µ preview —Å—Ç–∏–∫–µ—Ä—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (opacity: 0 –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö), –Ω–æ Lottie-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –∏ –º–æ–≥—É—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è:
```12:142:miniapp/src/components/PackCard.tsx
// –í—Å–µ —Å—Ç–∏–∫–µ—Ä—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è, –¥–∞–∂–µ –Ω–µ–≤–∏–¥–∏–º—ã–µ
pack.previewStickers.map((sticker, index) => {
  // Lottie –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ!
  <AnimatedSticker ... />
})
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- 4 –∞–Ω–∏–º–∞—Ü–∏–∏ √ó N –ø–∞–∫–æ–≤ = –¥–æ 40+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö Lottie-—Ä–µ–Ω–¥–µ—Ä–æ–≤
- –ö–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä —Å–æ–∑–¥–∞–µ—Ç SVG/DOM-–¥–µ—Ä–µ–≤–æ
- –ó–∞–≥—Ä—É–∑–∫–∞ JSON –¥–ª—è –≤—Å–µ—Ö —Å—Ç–∏–∫–µ—Ä–æ–≤ —Å—Ä–∞–∑—É

**–†–µ—à–µ–Ω–∏–µ**: –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞ + prefetch —Å–ª–µ–¥—É—é—â–µ–≥–æ

---

#### 2. **SVG-—Ä–µ–Ω–¥–µ—Ä–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê‚≠ê‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: `lottie-react` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SVG –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —á—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ Canvas –¥–ª—è:
- –°–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π (>100 —Å–ª–æ–µ–≤)
- –ê–Ω–∏–º–∞—Ü–∏–π —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ (blur, shadow, gradients)
- –ë–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–∞–¥—Ä–µ

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- SVG –ø–∞—Ä—Å–∏–Ω–≥ DOM –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞
- –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –≤—Å–µ–≥–æ SVG –¥–µ—Ä–µ–≤–∞ (–Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º)
- –í—ã—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –Ω–∞ DOM-—É–∑–ª—ã

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Canvas renderer –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ JSON

---

#### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞—É–∑—ã –Ω–µ–≤–∏–¥–∏–º—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê‚≠ê‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç `IntersectionObserver` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–π –≤–Ω–µ viewport:
```144:155:miniapp/src/components/AnimatedSticker.tsx
<Lottie
  animationData={animationData}
  loop={true}
  autoplay={true}  // –í—Å–µ–≥–¥–∞ –∏–≥—Ä–∞–µ—Ç!
/>
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –í—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ –≥–∞–ª–µ—Ä–µ–µ –∏–≥—Ä–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ù–µ–Ω—É–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è –Ω–µ–≤–∏–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –¢—Ä–∞—Ç–∞ CPU –Ω–∞ —Å–∫—Ä—ã—Ç—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ**: IntersectionObserver + pause/resume API Lottie

---

#### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∫–µ—à–∞ –∞–Ω–∏–º–∞—Ü–∏–π**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê‚≠ê‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: `animationCache` - –ø—Ä–æ—Å—Ç–æ–π Map –±–µ–∑ LRU –∏ TTL:
```4:5:miniapp/src/components/AnimatedSticker.tsx
// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–µ—à –¥–ª—è Lottie –∞–Ω–∏–º–∞—Ü–∏–π
const animationCache = new Map<string, any>();
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ JSON –≤ –ø–∞–º—è—Ç–∏
- –ö–∞–∂–¥—ã–π JSON –º–æ–∂–µ—Ç –±—ã—Ç—å 50-500KB
- –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –¥–æ–ª–≥–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ**: LRU –∫–µ—à —Å –ª–∏–º–∏—Ç–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 50-100 –∞–Ω–∏–º–∞—Ü–∏–π) –∏ TTL

---

### üü° –í–´–°–û–ö–ò–ï (—Å—Ä–µ–¥–Ω–µ–µ –≤–ª–∏—è–Ω–∏–µ)

#### 5. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ JSON –±–µ–∑ –æ—á–µ—Ä–µ–¥–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–∞–∂–¥—ã–π `AnimatedSticker` –¥–µ–ª–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π fetch –±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏:
```54:55:miniapp/src/components/AnimatedSticker.tsx
// –ó–∞–≥—Ä—É–∂–∞–µ–º JSON –∞–Ω–∏–º–∞—Ü–∏–∏
const response = await fetch(imageUrl);
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ 20+ –∫–∞—Ä—Ç–æ—á–µ–∫ = 20+ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö fetch
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (6-8 –Ω–∞ –¥–æ–º–µ–Ω)
- –ù–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ (–ø–µ—Ä–≤—ã–µ –≤–∏–¥–∏–º—ã–µ –ø–∞–∫–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø–µ—Ä–≤—ã–º–∏)

**–†–µ—à–µ–Ω–∏–µ**: –û—á–µ—Ä–µ–¥—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ (–≤–∏–¥–∏–º—ã–µ > prefetch > —Ñ–æ–Ω–æ–≤—ã–µ)

---

#### 6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ prefetch –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç–∏–∫–µ—Ä–æ–≤ –≤ —Ä–æ—Ç–∞—Ü–∏–∏**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –í `useStickerRotation` prefetch —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –Ω–µ –¥–ª—è Lottie JSON:
```48:59:miniapp/src/hooks/useStickerRotation.ts
// 1) –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Å—Ç–∏–∫–µ—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫)
if (stickerSources && stickerSources.length > 0) {
  const nextIdx = (currentIndexRef.current + 1) % Math.min(stickersCount, stickerSources.length);
  const src = stickerSources[nextIdx];
  if (src) {
    await imageLoader.loadImage(src.fileId, src.url, 1); // –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è!
  }
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ó–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤ (–Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å JSON)
- –°–∫–∞—á–∫–∏ FPS –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ**: Prefetch JSON –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞ –≤ —Ä–æ—Ç–∞—Ü–∏–∏

---

#### 7. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ lazy loading –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π –≤–Ω–µ viewport**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π JSON:
```26:98:miniapp/src/components/AnimatedSticker.tsx
useEffect(() => {
  // –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ä–∞–∑—É, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–Ω–µ viewport
  loadAnimation();
}, [fileId, imageUrl]);
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ó–∞–≥—Ä—É–∑–∫–∞ JSON –¥–ª—è —Å—Ç–∏–∫–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–≤–∏–¥–∏—Ç
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ TTFI (–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ)
- –¢—Ä–∞—Ç–∞ bandwidth

**–†–µ—à–µ–Ω–∏–µ**: IntersectionObserver –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ JSON

---

#### 8. **–ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Web Workers –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JSON**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∞—Ä—Å–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö JSON (~100-500KB) –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫:
```70:71:miniapp/src/components/AnimatedSticker.tsx
if (contentType && contentType.includes('application/json')) {
  const data = await response.json(); // –ë–ª–æ–∫–∏—Ä—É–µ—Ç –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ú–∏–∫—Ä–æ—Ñ—Ä–∏–∑—ã UI –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞ 50-200ms
- –°–Ω–∏–∂–µ–Ω–∏–µ FPS –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö

**–†–µ—à–µ–Ω–∏–µ**: –ü–∞—Ä—Å–∏–Ω–≥ JSON –≤ Web Worker (–µ—Å–ª–∏ JSON > 50KB)

---

#### 9. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç —Å–Ω–∏–∂–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞/—á–∞—Å—Ç–æ—Ç—ã –∫–∞–¥—Ä–æ–≤ –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:
```144:154:miniapp/src/components/AnimatedSticker.tsx
<Lottie
  animationData={animationData}
  loop={true}
  autoplay={true}
  // –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ rendererSettings –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
/>
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ù–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö FPS –ø–∞–¥–∞–µ—Ç
- –ù–µ—Ç —É–≤–∞–∂–µ–Ω–∏—è –∫ `prefers-reduced-motion`
- –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ + –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (fps, quality)

---

### üü¢ –°–†–ï–î–ù–ò–ï (–Ω–∏–∑–∫–æ–µ-—Å—Ä–µ–¥–Ω–µ–µ –≤–ª–∏—è–Ω–∏–µ)

#### 10. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HTTP-–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ Service Worker**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç Service Worker –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è JSON –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–∏

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ù–µ—Ç offline-–¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –∞–Ω–∏–º–∞—Ü–∏—è–º
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–µ—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

**–†–µ—à–µ–Ω–∏–µ**: Service Worker + Cache API —Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π cache-first

---

#### 11. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∂–∞—Ç–∏—è JSON –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: JSON –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å, –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏/–ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–∂–∞—Ç–∏—è

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ TTFI –ø—Ä–∏ —Å–ª–∞–±–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
- –ë–æ–ª—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ gzip/brotli –ø–æ–¥–¥–µ—Ä–∂–∫–∏ + –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ —Å–∂–∞—Ç—ã—Ö –≤–µ—Ä—Å–∏–π

---

#### 12. **–ù–µ—Ç –±–∞—Ç—á–∏–Ω–≥–∞ –∑–∞–≥—Ä—É–∑–æ–∫**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–∞–∂–¥–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- Overhead –Ω–∞ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ù–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ**: Batch API endpoint (–µ—Å–ª–∏ backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç) –∏–ª–∏ HTTP/2 multiplexing

---

#### 13. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ requestIdleCallback –¥–ª—è prefetch**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è idle-time –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- Prefetch –º–æ–∂–µ—Ç –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –∫—Ä–∏—Ç–∏—á–Ω—ã–º–∏ –∑–∞–≥—Ä—É–∑–∫–∞–º–∏
- –ù–µ—Ç —É–≤–∞–∂–µ–Ω–∏—è –∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ**: `requestIdleCallback` –¥–ª—è prefetch —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–Ω–∏–º–∞—Ü–∏–π

---

#### 14. **–ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏–π**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫ FPS, –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∑–∞–º–µ—á–µ–Ω–Ω—ã–º–∏

**–†–µ—à–µ–Ω–∏–µ**: PerformanceObserver + –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ AnimatedSticker

---

#### 15. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫**
**–í–ª–∏—è–Ω–∏–µ**: FPS ‚≠ê | TTFI ‚≠ê | –ü–∞–º—è—Ç—å ‚≠ê

**–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç –æ–¥–∏–Ω fileId, –¥–µ–ª–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ fetch

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –õ–∏—à–Ω–∏–π —Ç—Ä–∞—Ñ–∏–∫
- –ó–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ**: –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –∑–∞–≥—Ä—É–∑–æ–∫ —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π –ø–æ fileId

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1 (–±—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã, –≤—ã—Å–æ–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç)
1. –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞ –≤ PackCard
2. IntersectionObserver –¥–ª—è –ø–∞—É–∑—ã –Ω–µ–≤–∏–¥–∏–º—ã—Ö
3. LRU –∫–µ—à —Å –ª–∏–º–∏—Ç–æ–º —Ä–∞–∑–º–µ—Ä–∞

### –§–∞–∑–∞ 2 (—Å—Ä–µ–¥–Ω–∏–π —ç—Ñ—Ñ–µ–∫—Ç)
4. Prefetch –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞ –≤ —Ä–æ—Ç–∞—Ü–∏–∏
5. Lazy loading —á–µ—Ä–µ–∑ IntersectionObserver
6. –û—á–µ—Ä–µ–¥—å –∑–∞–≥—Ä—É–∑–æ–∫ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

### –§–∞–∑–∞ 3 (–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è)
7. Canvas renderer –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
8. Web Workers –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –±–æ–ª—å—à–∏—Ö JSON
9. Service Worker –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
10. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

---

## –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ (–§–∞–∑–∞ 1) | –ü–æ—Å–ª–µ (–§–∞–∑–∞ 2+3) |
|---------|-----|----------------|------------------|
| **FPS** | 30-45 | 50-55 | 55-60 |
| **TTFI** | 2-4s | 1.5-2.5s | 1-1.5s |
| **–ü–∞–º—è—Ç—å** | 150-300MB | 100-180MB | 80-120MB |
| **–°–µ—Ç—å** | –í—Å–µ —Å—Ä–∞–∑—É | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ |

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å)

- ‚úÖ Backend API –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã API –Ω–µ –ª–æ–º–∞—é—Ç—Å—è
- ‚úÖ –¢–æ–ª—å–∫–æ frontend-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ –æ—à–∏–±–æ–∫ (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ)















