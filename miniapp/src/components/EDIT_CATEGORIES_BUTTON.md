# –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## –û–ø–∏—Å–∞–Ω–∏–µ

–ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `StickerSetDetail` –¥–ª—è —Å—Ç–∏–∫–µ—Ä—Å–µ—Ç–æ–≤, –∫–æ–≥–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

## –£—Å–ª–æ–≤–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

–ö–Ω–æ–ø–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ** –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —É—Å–ª–æ–≤–∏–π:

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
```typescript
enableCategoryEditing && (isAuthor || isAdmin)
```
- `enableCategoryEditing` - —Ñ–ª–∞–≥, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ú–æ–∏ —Å—Ç–∏–∫–µ—Ä—ã")
- `isAuthor` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–æ–º —Å—Ç–∏–∫–µ—Ä—Å–µ—Ç–∞
- `isAdmin` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ availableActions (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```typescript
stickerSet.availableActions?.includes('EDIT_CATEGORIES')
```
- –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –ï—Å–ª–∏ –≤ –º–∞—Å—Å–∏–≤–µ `availableActions` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç `'EDIT_CATEGORIES'`, –∫–Ω–æ–ø–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª: `miniapp/src/components/StickerSetDetail.tsx`

```typescript
// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–æ—Å—Ç—É–ø–Ω–æ, –µ—Å–ª–∏:
// 1. –Ø–≤–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —á–µ—Ä–µ–∑ enableCategoryEditing (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ú–æ–∏ —Å—Ç–∏–∫–µ—Ä—ã"), –ò
// 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –∞–≤—Ç–æ—Ä —Å—Ç–∏–∫–µ—Ä—Å–µ—Ç–∞ (–∑–∞–≥—Ä—É–∑–∏–ª –µ–≥–æ) –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
// –ò–õ–ò
// 3. –í availableActions –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç EDIT_CATEGORIES (–±—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä–∏–ª –ø—Ä–∞–≤–∞)
const canEditCategories = 
  (enableCategoryEditing && (isAuthor || isAdmin)) || 
  (effectiveStickerSet.availableActions?.includes('EDIT_CATEGORIES') ?? false);
```

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í API –æ—Ç–≤–µ—Ç–µ:
```json
{
  "id": 123,
  "title": "–ú–æ–π —Å—Ç–∏–∫–µ—Ä—Å–µ—Ç",
  "availableActions": [
    "EDIT_CATEGORIES",
    "DELETE",
    "UNPUBLISH"
  ],
  ...
}
```

### –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
```tsx
{canEditCategories && (
  <IconButton onClick={handleOpenCategoriesDialog}>
    <EditIcon />
  </IconButton>
)}
```

## –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

```javascript
console.log('üè∑Ô∏è –ü—Ä–∞–≤–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', {
  stickerSetId: effectiveStickerSet.id,
  canEditCategories,
  enableCategoryEditing,
  isAuthor,
  isAdmin,
  hasEditCategoriesAction: effectiveStickerSet.availableActions?.includes('EDIT_CATEGORIES'),
  availableActions: effectiveStickerSet.availableActions
});
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ñ–∞–π–ª–µ `tests/stickerset-actions.spec.ts`.

–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `EDIT_CATEGORIES` –≤ `availableActions`
- –°–∫—Ä—ã—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–∞–≤

## –¢–∏–ø—ã

–í —Ñ–∞–π–ª–µ `miniapp/src/types/sticker.ts` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ:

```typescript
export interface StickerSetResponse {
  // ...
  availableActions?: string[]; // –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (DELETE, BLOCK, UNBLOCK, PUBLISH, UNPUBLISH, EDIT_CATEGORIES)
  // ...
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ —Å availableActions

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ë—ç–∫–µ–Ω–¥ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–Ω–æ–ø–∫–∏
2. **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
3. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π (DELETE, BLOCK, UNPUBLISH –∏ —Ç.–¥.)
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–æ–≤–µ—Ä—è—è –Ω–∞–ª–∏—á–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –º–∞—Å—Å–∏–≤–µ

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `miniapp/src/components/StickerSetDetail.tsx` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `miniapp/src/components/StickerSetActions.tsx` - –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
- `miniapp/src/types/sticker.ts` - —Ç–∏–ø—ã TypeScript
- `tests/stickerset-actions.spec.ts` - E2E —Ç–µ—Å—Ç—ã

