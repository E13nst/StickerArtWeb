# Changelog: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ X-Telegram-Init-Data –¥–ª—è inline query

## [Fix] 27 —è–Ω–≤–∞—Ä—è 2026

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –≤ inline query —Ä–µ–∂–∏–º–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ Mini App —á–µ—Ä–µ–∑ inline query (`@stixlybot`) –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Telegram-Init-Data` –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–∞–º 401 Unauthorized.

**–ü—Ä–∏—á–∏–Ω–∞:** Frontend –ø—Ä–æ–≤–µ—Ä—è–ª –Ω–∞–ª–∏—á–∏–µ `initData` –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ –ø—É—Å—Ç–æ–π. –í inline query –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `initData` —Å–æ–¥–µ—Ä–∂–∏—Ç `user + query_id` –±–µ–∑ `chat`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º.

### ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. `miniapp/src/App.tsx`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `if (!initData || initData.trim() === '')`
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è **–í–°–ï–ì–î–ê**, –¥–∞–∂–µ –µ—Å–ª–∏ `initData` –ø—É—Å—Ç–∞—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (INLINE_QUERY, CHAT, EMPTY)
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è inline query –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

#### 2. `miniapp/src/api/client.ts`
- ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –º–µ—Ç–æ–¥–µ `setAuthHeaders()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: INLINE_QUERY, CHAT, UNKNOWN, EMPTY
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### 3. `miniapp/src/pages/GalleryPage2.tsx`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ —É—Å–ª–æ–≤–∏–µ `if (currentInitData)`
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ initData

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ –°–æ–∑–¥–∞–Ω `/miniapp/docs/INLINE_QUERY_INIT_DATA_FIX.md` —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ Inline query —Ä–µ–∂–∏–º —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ `X-Telegram-Init-Data` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ **100%** –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
- ‚úÖ –ë–µ–∑ breaking changes –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. –û—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ inline query: `@stixlybot test` ‚Üí ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
2. –û—Ç–∫—Ä—ã—Ç–∏–µ –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ —á–∞—Ç–∞ ‚Üí ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
3. –û—Ç–∫—Ä—ã—Ç–∏–µ direct link ‚Üí ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### üìä –ú–µ—Ç—Ä–∏–∫–∏

- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 3
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 2 —Ñ–∞–π–ª–∞
- **Linter errors:** 0
- **Breaking changes:** 0
