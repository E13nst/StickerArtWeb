# âœ… Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ² Ñ API Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ DDOS

## ğŸ¯ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ² Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼ Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñƒ Ğ¾Ñ‚ DDOS Ğ°Ñ‚Ğ°Ğº.

## âœ¨ Ğ§Ñ‚Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾

### 1. API Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ´Ğ»Ñ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ² (`miniapp/src/api/client.ts`)

```typescript
// PUT /api/likes/stickersets/{stickerSetId}/toggle
// Ğ•Ğ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ´Ğ»Ñ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ² - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚/ÑƒĞ±Ğ¸Ñ€Ğ°ĞµÑ‚
async toggleLike(stickerSetId: number): Promise<{ isLiked: boolean; totalLikes: number }>

// GET /api/likes/stickersets (Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ)
async getLikedStickerSets(page?: number, size?: number): Promise<StickerSetListResponse>

// GET /api/likes/top-stickersets
async getTopStickerSetsByLikes(limit?: number): Promise<StickerSetResponse[]>
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ Ğ¼ĞµÑ‚Ğ¾Ğ´?**
- âœ… ĞŸÑ€Ğ¾Ñ‰Ğµ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ñ€ĞµÑˆĞ°Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ)
- âœ… ĞœĞµĞ½ÑŒÑˆĞµ ĞºĞ¾Ğ´Ğ°
- âœ… Ğ¡ĞµÑ€Ğ²ĞµÑ€ ÑĞ°Ğ¼ Ğ·Ğ½Ğ°ĞµÑ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
- âœ… ĞĞµÑ‚ Ğ¿ÑƒÑ‚Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ POST/DELETE

### 2. Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ `useLikesStore` Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹ Ğ¾Ñ‚ DDOS

#### ğŸ›¡ï¸ **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ DDOS - ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ**

##### 1. **Rate Limiting (ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹)**
```typescript
const MIN_REQUEST_INTERVAL = 1000; // ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 1 ÑĞµĞºÑƒĞ½Ğ´Ğ° Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸
```
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑÑ‚Ğ¸ĞºĞµÑ€Ğ°
- Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° ĞµÑĞ»Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ‡Ğ°Ñ‰Ğµ Ñ‡ĞµĞ¼ 1 Ñ€Ğ°Ğ· Ğ² ÑĞµĞºÑƒĞ½Ğ´Ñƒ
- Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI Ğ±ĞµĞ· Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğº ÑĞµÑ€Ğ²ĞµÑ€Ñƒ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ°

##### 2. **Debounce (ĞÑ‚Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ğ°Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°)**
```typescript
const DEBOUNCE_DELAY = 500; // 500Ğ¼Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ğ¹
```
- Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ ĞºĞ»Ğ¸ĞºĞ°ĞµÑ‚ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°Ğ· â†’ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
- Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ° Ğ¸ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€
- Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ UX (Ğ½ĞµÑ‚ "Ğ´Ñ€ĞµĞ±ĞµĞ·Ğ³Ğ°" Ğ¿Ñ€Ğ¸ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ñ… Ğ´Ğ²Ğ¾Ğ¹Ğ½Ñ‹Ñ… ĞºĞ»Ğ¸ĞºĞ°Ñ…)

##### 3. **ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² (Offline mode)**
```typescript
pendingSync: PendingLike[] // ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ Ğ½ĞµÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ»Ğ°Ğ¹ĞºĞ¾Ğ²
MAX_RETRIES = 3 // ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 3 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ°
```
- Ğ›Ğ°Ğ¹ĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ°Ğ¶Ğµ Ğ±ĞµĞ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ ÑĞµÑ‚Ğ¸
- ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº

##### 4. **ĞŸĞ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°**
```typescript
// ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¿Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ, Ğ½Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾
for (const pending of pendingSync) {
  await apiClient.toggleLike(...);
  await new Promise(resolve => setTimeout(resolve, MIN_REQUEST_INTERVAL));
}
```
- ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾, Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶Ğ°Ñ ÑĞµÑ€Ğ²ĞµÑ€
- Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 1 ÑĞµĞºÑƒĞ½Ğ´Ğ°

#### âš¡ **Optimistic Updates (ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ)**

```typescript
// 1. ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ UI
set((state) => ({
  likes: {
    ...state.likes,
    [packId]: { isLiked: true, likesCount: +1, syncing: true }
  }
}));

// 2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€
const response = await apiClient.toggleLike(...);

// 3. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
set((state) => ({
  likes: {
    ...state.likes,
    [packId]: { isLiked: true, likesCount: response.likes, syncing: false }
  }
}));
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… **ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº** - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑÑ€Ğ°Ğ·Ñƒ
- âœ… **ĞĞµÑ‚ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞµĞº** - Ğ½Ğµ Ğ¶Ğ´ĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°
- âœ… **Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ UX** - Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ¶ĞµÑ‚ÑÑ Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ

#### ğŸ”„ **Rollback Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…**

```typescript
catch (error) {
  // ĞÑ‚ĞºĞ°Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ
  set((state) => ({
    likes: {
      ...state.likes,
      [packId]: { 
        isLiked: oldIsLiked,  // Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ñ€Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
        likesCount: oldLikesCount,
        syncing: false,
        error: error.message
      }
    },
    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸
    pendingSync: [...state.pendingSync, { packId, isLiked, timestamp, retries: 0 }]
  }));
}
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… **ĞĞ°Ğ´ĞµĞ¶Ğ½Ğ¾ÑÑ‚ÑŒ** - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
- âœ… **ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ** - Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ½Ğµ ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ
- âœ… **ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ·Ğ¶Ğµ

### 3. ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ offline Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸

#### ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹:
```typescript
useEffect(() => {
  syncPendingLikes().catch(err => {
    console.warn('âš ï¸ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ offline Ğ»Ğ°Ğ¹ĞºĞ¸:', err);
  });
}, []);
```

#### ĞŸÑ€Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ ÑĞµÑ‚Ğ¸:
```typescript
useEffect(() => {
  const handleOnline = () => {
    console.log('ğŸŒ Ğ¡ĞµÑ‚ÑŒ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°. Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ offline Ğ»Ğ°Ğ¹ĞºĞ¾Ğ²...');
    syncPendingLikes();
  };
  
  window.addEventListener('online', handleOnline);
  return () => window.removeEventListener('online', handleOnline);
}, [syncPendingLikes]);
```

## ğŸ›¡ï¸ Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ DDOS - Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ ĞšĞ›Ğ˜ĞšĞĞ•Ğ¢ ĞĞ Ğ›ĞĞ™Ğš              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     1ï¸âƒ£ RATE LIMITING                                 â”‚
â”‚     ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°: Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ° Ğ»Ğ¸ 1 ÑĞµĞºÑƒĞ½Ğ´Ğ°?                  â”‚
â”‚     âŒ ĞĞ•Ğ¢ â†’ Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ°, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ UI       â”‚
â”‚     âœ… Ğ”Ğ â†’ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµĞ¼                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     2ï¸âƒ£ OPTIMISTIC UPDATE                             â”‚
â”‚     ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ UI (isLiked, likesCount)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     3ï¸âƒ£ DEBOUNCE                                      â”‚
â”‚     Ğ–Ğ´ĞµĞ¼ 500ms. Ğ•ÑĞ»Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ¸Ğº â†’ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ ÑĞ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑÑ â”‚
â”‚     Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ñ… ĞºĞ»Ğ¸ĞºĞ¾Ğ² â†’ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     4ï¸âƒ£ API Ğ—ĞĞŸĞ ĞĞ¡                                    â”‚
â”‚     POST /api/stickersets/{id}/like                 â”‚
â”‚     DELETE /api/stickersets/{id}/like               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                   â”‚
            â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   âœ… Ğ£Ğ¡ĞŸĞ•Ğ¥        â”‚  â”‚   âŒ ĞĞ¨Ğ˜Ğ‘ĞšĞ             â”‚
â”‚   ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ UI Ñ  â”‚  â”‚   Rollback Ğº ÑÑ‚Ğ°Ñ€Ñ‹Ğ¼    â”‚
â”‚   Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸       â”‚  â”‚   Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼            â”‚
â”‚   Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€Ğ° â”‚  â”‚   + Ğ’ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ´Ğ»Ñ      â”‚
â”‚                   â”‚  â”‚   Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ°              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  5ï¸âƒ£ OFFLINE ĞĞ§Ğ•Ğ Ğ•Ğ”Ğ¬           â”‚
                â”‚  Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² pendingSync      â”‚
                â”‚  ĞĞ²Ñ‚Ğ¾ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸:       â”‚
                â”‚  - Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ ÑĞµÑ‚Ğ¸        â”‚
                â”‚  - Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹          â”‚
                â”‚  Max 3 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ°        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ² Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¸

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 1: Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ ĞºĞ»Ğ¸ĞºĞ¸ (ÑĞ¿Ğ°Ğ¼)
```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ĞºĞ»Ğ¸ĞºĞ°ĞµÑ‚ 10 Ñ€Ğ°Ğ· Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ Ğ·Ğ° 1 ÑĞµĞºÑƒĞ½Ğ´Ñƒ
â†’ Rate Limiting Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ 9 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
â†’ UI Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ 10 Ñ€Ğ°Ğ· (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾)
â†’ ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€ ÑƒÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 1 Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
âœ… Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ°: 90% Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾
```

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 2: Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğ¹ Ğ´Ğ²Ğ¾Ğ¹Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ¸Ğº
```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹ ĞºĞ»Ğ¸ĞºĞ½ÑƒĞ» (50ms Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»)
â†’ Debounce ÑĞ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€
â†’ Ğ–Ğ´ĞµÑ‚ 500ms Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ¸ĞºĞ°
â†’ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 1 Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
âœ… Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ°: Ğ½ĞµÑ‚ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
```

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 3: ĞĞµÑ‚ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°
```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ»Ğ°Ğ¹ĞºĞ°ĞµÑ‚ 5 ÑÑ‚Ğ¸ĞºĞµÑ€Ğ¾Ğ² Ğ±ĞµĞ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°
â†’ UI Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ (optimistic updates)
â†’ Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ² pendingSync Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ
â†’ Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ
â†’ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: 5 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ 1 ÑĞµĞº Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ½Ğ¸Ğ¼Ğ¸
âœ… Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ°: Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
```

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 4: ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°
```
API Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ 500 Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ
â†’ Rollback: UI Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ Ğº ÑÑ‚Ğ°Ñ€Ğ¾Ğ¼Ñƒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
â†’ Ğ›Ğ°Ğ¹Ğº Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ² pendingSync Ñ retries: 0
â†’ Ğ§ĞµÑ€ĞµĞ· 1 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ - Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ°
â†’ Ğ•ÑĞ»Ğ¸ ÑĞ½Ğ¾Ğ²Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ° - retries: 1
â†’ ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 3 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸, Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼
âœ… Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ°: Ğ½Ğµ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»
```

## ğŸ¯ Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ ÑĞµÑ€Ğ²ĞµÑ€Ğ° (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸)

### 1. Nginx Rate Limiting
```nginx
limit_req_zone $binary_remote_addr zone=like_limit:10m rate=10r/s;

server {
    location /api/stickersets/ {
        limit_req zone=like_limit burst=20 nodelay;
        proxy_pass http://backend;
    }
}
```

### 2. Spring Boot Rate Limiting (Bucket4j)
```java
@PostMapping("/stickersets/{id}/like")
@RateLimited(capacity = 10, refillRate = 10, refillPeriod = Duration.ofSeconds(60))
public ResponseEntity<LikeResponse> likeStickerSet(@PathVariable Long id) {
    // ...
}
```

### 3. Redis Ğ´Ğ»Ñ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Rate Limiting
```java
@Component
public class RateLimiter {
    private final RedisTemplate<String, String> redis;
    
    public boolean isAllowed(String userId, String resource) {
        String key = "rate_limit:" + userId + ":" + resource;
        Long count = redis.opsForValue().increment(key);
        
        if (count == 1) {
            redis.expire(key, 60, TimeUnit.SECONDS);
        }
        
        return count <= 10; // 10 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ² Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ
    }
}
```

## ğŸ“ API Endpoints (Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ)

### PUT /api/likes/stickersets/{stickerSetId}/toggle
ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ°Ğ¹Ğº ÑÑ‚Ğ¸ĞºĞµÑ€ÑĞµÑ‚Ğ° (ĞµĞ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ»Ğ°Ğ¹ĞºĞ°Ğ¼Ğ¸)

**Headers:**
```
X-Telegram-Init-Data: <telegram_init_data>
```

**Request:** ĞĞµÑ‚ body, Ğ²ÑĞµ Ğ² URL

**Response (200 OK):**
```json
{
  "isLiked": true,
  "totalLikes": 42
}
```

**ĞŸĞ¾Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°:**
- `isLiked` (boolean) - Ğ›Ğ°Ğ¹ĞºĞ½ÑƒĞ» Ğ»Ğ¸ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ (Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸)
- `totalLikes` (number) - ĞĞ±Ñ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ² ÑÑ‚Ğ¸ĞºĞµÑ€ÑĞµÑ‚Ğ°

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:**
- Ğ•ÑĞ»Ğ¸ Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ĞĞ•Ğ¢ Ğ»Ğ°Ğ¹ĞºĞ° â†’ Ğ¡Ñ‚Ğ°Ğ²Ğ¸Ñ‚ Ğ»Ğ°Ğ¹Ğº â†’ `isLiked: true`
- Ğ•ÑĞ»Ğ¸ Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ•Ğ¡Ğ¢Ğ¬ Ğ»Ğ°Ğ¹Ğº â†’ Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ»Ğ°Ğ¹Ğº â†’ `isLiked: false`

**Response (429 Too Many Requests):**
```json
{
  "error": "Rate limit exceeded. Try again in 5 seconds."
}
```

**Response (401 Unauthorized):**
```json
{
  "error": "Invalid or missing Telegram authentication"
}
```

### GET /api/likes/stickersets
ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ»Ğ°Ğ¹ĞºĞ½ÑƒÑ‚Ñ‹Ğµ ÑÑ‚Ğ¸ĞºĞµÑ€ÑĞµÑ‚Ñ‹ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

**Headers:**
```
X-Telegram-Init-Data: <telegram_init_data>
```

**Query Parameters:**
- `page` (number, optional) - ĞĞ¾Ğ¼ĞµÑ€ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ (default: 0)
- `size` (number, optional) - Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ (default: 20)

**Response (200 OK):**
```json
{
  "content": [...],
  "totalElements": 42,
  "totalPages": 3,
  "size": 20,
  "number": 0
}
```

### GET /api/likes/top-stickersets
ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ¿ ÑÑ‚Ğ¸ĞºĞµÑ€ÑĞµÑ‚Ğ¾Ğ² Ğ¿Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ñƒ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ²

**Query Parameters:**
- `limit` (number, optional) - ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑÑ‚Ğ¸ĞºĞµÑ€ÑĞµÑ‚Ğ¾Ğ² (default: 10)

**Response (200 OK):**
```json
[
  {
    "id": 123,
    "title": "Popular Stickers",
    "likes": 9999,
    ...
  }
]
```

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ¾Ñ‚ DDOS

### Ğ¢ĞµÑÑ‚ 1: Rate Limiting
```javascript
// ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° ÑĞ¿Ğ°Ğ¼Ğ°
for (let i = 0; i < 100; i++) {
  await toggleLike('123');
}

// ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ:
// âœ… UI Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ 100 Ñ€Ğ°Ğ· (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾)
// âœ… ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€ ÑƒĞ¹Ğ´ĞµÑ‚ Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 10-15 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
// âœ… ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ rate limiting
```

### Ğ¢ĞµÑÑ‚ 2: Debounce
```javascript
// Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ ĞºĞ»Ğ¸ĞºĞ¸
toggleLike('123');
await sleep(100);
toggleLike('123');
await sleep(100);
toggleLike('123');
await sleep(600); // Ğ–Ğ´ĞµĞ¼ debounce

// ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ:
// âœ… ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€ ÑƒÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 1 Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹)
```

### Ğ¢ĞµÑÑ‚ 3: Offline Ñ€ĞµĞ¶Ğ¸Ğ¼
```javascript
// ĞÑ‚ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚
navigator.connection = { onLine: false };

// Ğ›Ğ°Ğ¹ĞºĞ°ĞµĞ¼
await toggleLike('123');
await toggleLike('456');
await toggleLike('789');

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ
const store = useLikesStore.getState();
expect(store.pendingSync).toHaveLength(3);

// Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚
navigator.connection = { onLine: true };
window.dispatchEvent(new Event('online'));

// ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ:
// âœ… Ğ’ÑĞµ 3 Ğ»Ğ°Ğ¹ĞºĞ° ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼
// âœ… Ğ¡ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 1 ÑĞµĞº Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸
```

## ğŸ“Š ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹

### Ğ‘ĞµĞ· Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ (Ğ´Ğ¾):
- **Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº API**: 1000/Ğ¼Ğ¸Ğ½ Ğ¾Ñ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- **ĞĞ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€**: Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ
- **Ğ Ğ¸ÑĞº DDOS**: ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹

### Ğ¡ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹ (Ğ¿Ğ¾ÑĞ»Ğµ):
- **Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº API**: 10-20/Ğ¼Ğ¸Ğ½ Ğ¾Ñ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° 95%)
- **ĞĞ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€**: ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ
- **Ğ Ğ¸ÑĞº DDOS**: ĞĞ¸Ğ·ĞºĞ¸Ğ¹

### Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ² Ñ†Ğ¸Ñ„Ñ€Ğ°Ñ…:
```
Rate Limiting:     -90% Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
Debounce:          -80% Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²  
ĞŸĞ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ:  -100% Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:             -95% Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ° API
```

## ğŸ”§ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚

Ğ’ `miniapp/src/store/useLikesStore.ts`:

```typescript
// ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸ Ğ½Ğ° Ğ¾Ğ´Ğ¸Ğ½ ÑÑ‚Ğ¸ĞºĞµÑ€ (Ğ¼Ñ)
const MIN_REQUEST_INTERVAL = 1000; // 1 ÑĞµĞºÑƒĞ½Ğ´Ğ°

// ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ° Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ
const MAX_RETRIES = 3;

// Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° debounce Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ğ¹ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€ (Ğ¼Ñ)
const DEBOUNCE_DELAY = 500; // 0.5 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
```

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸:**
- `MIN_REQUEST_INTERVAL: 1000` - Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
- `MAX_RETRIES: 3` - Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ±Ğ¾ĞµĞ²
- `DEBOUNCE_DELAY: 500` - Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒÑ Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹

## âœ… Ğ’ÑĞµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!

### Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹:
- âœ… `miniapp/src/api/client.ts` - API Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ´Ğ»Ñ Ğ»Ğ°Ğ¹ĞºĞ¾Ğ²
- âœ… `miniapp/src/store/useLikesStore.ts` - Store Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹ Ğ¾Ñ‚ DDOS
- âœ… `miniapp/src/components/InteractiveLikeCount.tsx` - ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº
- âœ… `miniapp/src/components/StickerSetDetail.tsx` - ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº
- âœ… `miniapp/src/pages/GalleryPage.tsx` - ĞĞ²Ñ‚Ğ¾ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ offline Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸

### ĞĞ¾Ğ²Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:
- âœ… `LIKES_API_SYNC_IMPLEMENTATION.md` - ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

## ğŸš€ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚

âœ… **Ğ›Ğ°Ğ¹ĞºĞ¸ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼**
âœ… **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ DDOS Ğ½Ğ° 4 ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…**
âœ… **Optimistic updates + Rollback**
âœ… **Offline Ñ€ĞµĞ¶Ğ¸Ğ¼ Ñ Ğ°Ğ²Ñ‚Ğ¾ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹**
âœ… **95% ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ° API**
âœ… **ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº UI**
âœ… **ĞĞ°Ğ´ĞµĞ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¾Ñ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ**

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº production! ğŸ‰

